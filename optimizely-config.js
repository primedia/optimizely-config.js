// Generated by CoffeeScript 1.7.1
(function() {
  define([], function() {
    return function() {
      return this._activateOptimizelyExperiment = function(testName, notMatch, callback, callbackArgs) {
        var activeExperiments, curTest, curVar, i, mCnt, mExp, mTest, mVars, oData, soTestRegex, soVariationRegex, tCount;
        oData = window.optimizely.data;
        activeExperiments = oData.state.activeExperiments;
        mCnt = activeExperiments.length;
        mTest = '';
        mVars = '';
        mExp = '';
        tCount = 0;
        soTestRegex = new RegExp(testName, 'i');
        soVariationRegex = new RegExp(notMatch, 'i');
        i = 0;
        while (i < mCnt) {
          mExp = activeExperiments[i];
          curTest = oData.experiments[mExp].name;
          curVar = oData.state.variationNamesMap[mExp];
          if (tCount > 0) {
            mTest += ' : ';
            mVars += ' : ';
          }
          mTest += curTest;
          mVars += curVar;
          tCount += 1;
          i++;
        }
        if (mTest.match(soTestRegex) && !mVars.match(soVariationRegex)) {
          return callback.apply(null, callbackArgs);
        }
      };
    };
  });

}).call(this);
